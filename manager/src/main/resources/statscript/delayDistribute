#!/bin/awk -f 
BEGIN{
	OFS=" : ";
	maxDelay=36000;
	nullDelay=0; ###延迟小于0 表示为抽取掉
	delayRange[1]=300;
	delayRange[2]=600;
	delayRange[3]=1200;
	delayRange[4]=2400;
	delayRange[5]=3600;
	delayRange[6]=7200;
	delayRange[7]=14400;
	delayRange[8]=28800;
	delayRange[9]=36000;
}
{
	split($9,dArray," : ");
	value=dArray[2];
	if(value<nullDelay){
		delays[nullDelay]++;
		#### news time is null
		print($4,$9) > efile 
	}else if(value>=maxDelay){
		delays[maxDelay*10]++;
		#### must provide efile for error url distination.
		print($4,$9) > efile
	} else {
		for(i=1;i<=length(delayRange);i++){
			key=delayRange[i];
			if(value<key){
				delays[key]++;break;
			}
		}
	}
}
END{
	for(delay in delays){
		print delay,delays[delay]
	}
}
